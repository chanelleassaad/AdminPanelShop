<form [formGroup]="customerForm" class="overflow-y-hidden">
  <div formArrayName="addresses">
    @for (address of addresses.controls; track address; let i = $index) {
      <div
        [formGroupName]="i"
        >
        <div class="flex items-center">
          <h3 class="text-xs p-2.5 font-light">Address {{ i + 1 }}</h3>
          @if (i > 0) {
            <button
              mat-icon-button
              (click)="deleteAddress(i)"
              class="p-0"
              aria-label="Delete address"
              >
              <mat-icon class="text-sm">delete</mat-icon>
            </button>
          }
        </div>
        <div
          class="flex flex-col sm:flex-row items-center sm:space-y-0 sm:space-x-4"
          >
          <mat-form-field class="w-full sm:w-1/4">
            <mat-label>Street</mat-label>
            <input matInput formControlName="street" />
          </mat-form-field>
          <mat-form-field class="w-full sm:w-1/4">
            <mat-label>City</mat-label>
            <input matInput formControlName="city" />
          </mat-form-field>
          <mat-form-field class="w-full sm:w-1/4">
            <mat-label>Postal Code</mat-label>
            <input
              matInput
              formControlName="zip"
              maxlength="5"
              placeholder="Ex. 94105"
              />
          </mat-form-field>
        </div>
      </div>
    }
  </div>
  <button mat-button color="primary" (click)="addAddress()">Add Address</button>
</form>
